## x) Lue ja tiivistä
- virtuaalipalvelimia vuokraavia yrityksiä on paljon, joten ole tarkkana minkä valitset
  - suositellaan valitsemaan palveluntarjoaja, jonka palvelimet sijaitsevat mahdollisimman lähellä tulevia asiakkaitasi
- usein palveluntarjoajat tarjoavat ilmaisia krediittejä, joilla pääsee kokeilemaan palvelinten vuokrausta

- kun palvelin on saatu toimintakuntoon niin ensimmäisenä kone päivitetään ja siihen asennetaan palomuuri
- sen jälkeen on luotava uusi käyttäjä ja lukittava root-käyttäjä (least-privilege principle)

- kun käyttäjä on luoto voidaan aloittaa kotisivujen luominen apachen avulla niin kuin aikaisemmissa tehtävissä on tehty
- lopuksi vielä palvelimen ohjelmien päivitys

## a) Oman virtuaalipalvelimen vuokraus

Vuokrasin oman virtuaalipalvelimeni UpCloudilta, sillä heiltä löytyy palvelinsalit Helsingistä, ja toimija on suomalainen. 
Käyttäjän luomisen ja maksutietojen lisäämisen jälkeen pääsin luomaan omaa palvelintani näytön vasemmasta reunasta valitsemalla kodan "Servers" ja näkyviin tulevasta ala-valikosta "Cloud Servers".
Näytölle tuli esiin kohta "Deploy server", jota klikkaamalla pääsin aloittamaan palvelimen konfiguroinnin.

<img width="1902" height="935" alt="image" src="https://github.com/user-attachments/assets/787bcde4-ac22-4558-8d55-f22631ed0721" />

Tein valinnat seuraaviin kohtiin: "Location", "Plan", "Operating System", "Login Method" sekä "Server Configuration. 
<img width="819" height="696" alt="Screenshot 2026-02-09 035338" src="https://github.com/user-attachments/assets/5006b39b-1031-4b52-810f-6d70eed3f933" />
Sijainniksi valitsin "FI-HEL1", koska se on toinen Helsingissä sijaitsevista palvelinsaleista, ja samalla toinen lähimmistä.
<img width="829" height="735" alt="Screenshot 2026-02-09 035345" src="https://github.com/user-attachments/assets/198fe088-291f-4090-a942-32cf2ce289fd" />
Valmiiksi laadituista kokoonpanoista valitsin halvimman, sillä sen speksit riittävät hyvin omaan käyttötarkoitukseen. Prosessoreita, ramia ja tallennustilaa pystyy lisäämään, jos tarve vaatii.
<img width="827" height="698" alt="Screenshot 2026-02-09 035352" src="https://github.com/user-attachments/assets/f6385abc-5dda-47bf-aee8-9ada4e5b0191" />
Käyttöjärjestelmäksi valitsin  Debian GNU/Linux 13 (Trixie), koska se on kurssilla ollut muutenkin käytössä.
<img width="828" height="382" alt="image" src="https://github.com/user-attachments/assets/0c75a8b2-2c74-4f44-b046-0c157aa73660" />
Kirjautumistavaksi valitsin SSH avaimet, jotka oli luotava tässä vaiheessa erikseen. 
Loin ssh avaimet komennolla ssh-keygen (jos ssh clientti ei ole asennettuna niin asenna se komennolla ´sudo apt-get -y install openssh-client`). Kun avain on luotu löytyy se kotihakemistostasi alihakemistosta .ssh/. Tämän jälkeen ajat komennon cat id_ed0000.pub ja kopioit komennon tulosteen ja liität sen UpCloudin public SSH Key kohtaan.

<img width="492" height="455" alt="Screenshot 2026-02-09 042844" src="https://github.com/user-attachments/assets/e2346516-7520-420d-bf9e-94c8e8fa5283" />

Sitten nimesin vielä hostin ja serverin ja painoin "deploy". Palvelimeen käynnistymiseen meni muutama minuutti aikaa, jonka jälkeen pystyin ottamaan yhteyden palvelimeen komennolla `ssh root@94.237.116.194`. Nyt oli ensimmäisenä päivitettävä kone ja ladatta palomuuri ja otettava se käyttöön ja tämä onnistui jo tutuilla komennoilla `sudo apt-get update`,
`sudo apt-get install ufw`, `sudo ufw allow 22/tcp` ja `sudo ufw enable`. Komento `sudo ufw allow 22/tcp` tekee reijän palomuuriin porttiin 22. 

Seuraavaksi oli luotava uusi käyttäjä, sillä nyt olin toiminut root käyttäjänä. Tässä kohtaa minulla tuli ongelma. Kun olin luonut käyttäjän ohjeiden mukaisesti niin en pystynyt ottamaan yhteyttä käyttäjällä palvelimeen vaan sain virheen "joni@joni-virtualbox:/$ ssh miltsi@94.237.116.194
miltsi@94.237.116.194: Permission denied (publickey)." Koitin selvittää mitä tämä tarkoitti ja se tarkoitti sitä, että palvelin ei saanut validia SSH julkista avainta tai avain ei vastannut luomaani avainta. Tämän jälkeen yritin tehdä käyttäjän uudestaa ja tekemällä uuden SSH avaimen ja luomalla uuden palvelimen, mutta sain aina saman virheilmoituksen. Yritän vielä selvittää ongelmaa ennen seuraavaa tuntia, mutta tällä hetkellä olen jumissa asian kanssa.

## Lähteet
- tehtävänanto: https://terokarvinen.com/linux-palvelimet/#h4-maailma-kuulee
- Susannan ratkaisu tehtävään: https://susannalehto.fi/2022/teoriasta-kaytantoon-pilvipalvelimen-avulla-h4/
